// ==UserScript==
// @name        TA Chat Helper - DTeCH
// @namespace   TiberiumAlliancesChatHelperEnhanced
// @author      DTeCH
// @description Automates the use of chat and message BB-Codes: [coords][url][player][alliance][b][i][s][u] - Contact list for whispering - Type /chelp <enter> in chat for help.
// @include     https://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @version     2.1.1i
// @icon        http://eistee82.github.io/ta_simv2/icon.png
// @updateURL   https://cdn.rawgit.com/DTeCH-X/stuff/master/DTTACH.meta.js
// @downloadURL https://cdn.rawgit.com/DTeCH-X/stuff/master/DTTACH.user.js
// @grant       none
// ==/UserScript==

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('1u{(l(){8 3j=l(){y.4C=0;8 f=l f(3i,46){1v.1N("45: "+3i+"\\n")};1u{l 28(){8 39=50;y.18=1K;y.1Y="4.0.4";y.2U="4a 4b 4i 4j (4m)";f(y.2U+" v"+y.1Y+": 5n.",0);8 1b={2a:"4.0.4",d:[]};8 1J=/[-\\w\\.]/;8 1s=I;8 d=[];8 2d;8 1Z;l 2j(1x){1x.2m();7(1x.1n){q 1x.1n}r 7(1e.2Y){8 25=1e.2Y.4F();8 1L=25.3I();25.3O(1K);1L.3R(1x);1L.3Z("41",25);q 1L.16.F}q 0}l 1D(26,H){7(26.1n){26.2y(H,H);26.2m()}}l 2z(j){8 H=2j(j);8 h=j.x;8 2E=h.1o(H-1);7(2E.K(1J)!=A){8 1E=H;8 1F=H;8 t=j.x;2Q(1E>=0&&t.1o(1E-1).K(1J)!=A){1E--}2Q(1F<=t.F&&t.1o(1F).K(1J)!=A){1F++}q[1E,1F]}}l 15(19,j){8 1r=19.J("[","[/");8 21=19.F;8 2c=1r.F;7(j!=A){8 H=2j(j);8 h=j.x;7(j.Q==="1d"){8 1i=j.1j}7(j.1n!==j.2b){8 a=h.1m(0,j.1n);8 b=h.1m(j.1n,j.2b);8 c=h.1m(j.2b,h.F);j.x=a+19+b+1r+c;1D(j,H+21+2c+b.F)}r 7((h===""||h.1o(H-1)===" ")&&h.1o(H)!=="["){j.x=h.14(0,H)+19+1r+h.14(H,h.F);1D(j,H+21)}r 7(h.1o(H-1).K(1J)!=A){8 1I=2z(j);8 s=1I[0];8 e=1I[1];j.x=h.1m(0,s)+19+h.1m(s,e)+1r+h.1m(e,h.F);1D(j,e+21+2c)}7(j.Q==="1d"){j.1j=1i}}}l 30(){1q("4x /32 1c 4X 16 5d U 5q 3H 2i.\\n\\3J 3K 1c 2f:\\36 Y 2f 37 1g 3c 1A 3e 1A 3h 4c 4f 4h.\\n\\29 + 1\\t:\\36 1g 3c 1A 3e 1c a 2i 1a 4k 4l 1A T 4q. 4u 1l 4A U 2n 4D.\\29 + 2\\t:\\4K 4L 4T 4V y\\29 + 0\\t:\\4W 1M T\\n\\55 3h: T a 59 3o -1a- T 2n 3o 5m 2n 2B 1l (7 2f 1l 2l 1a 3s 3t <3y> 2l T 3A 3B).\\3C U 3E 2B 1A 3F 3G.\\n|\\1k + p 1a 2e + 3\\t:\\3L T\\n|\\1k + a 1a 2e + 4\\t:\\3M T\\n|\\1k + b\\t\\t\\t:\\3N T\\n|\\1k + i\\t\\t\\t:\\3P T\\n|\\1k + u\\t\\t\\t:\\3S T\\n|3W\\1k + s\\t\\t\\t:\\3X T\\n\\3Y D 40:\\n/D -1a- /d\\n/1h\\n/1B\\n/1B 1M - 43 Y 44 3d D")}l 1z(){1b.d=d;8 2u=3a.5E(1b);f("4e: "+2u,1);Z.4g("W",2u)}l 2g(){1u{7(Z.1t("1T")){8 1U=Z.1t("1T");1U=1U.2o(",");1b.d=1U;Z.4o("1T")}r 7(Z.1t("W")){8 1V=3a.4r(Z.1t("W"));7(1V.2a!=y.1Y){8 O=1V.2a.2o(".");8 M=y.1Y.2o(".");7(O[0]!=M[0]){f("2v: 4B 2w 2V 1G v"+O[0]+"."+O[1]+"."+O[2]+" U v"+M[0]+"."+M[1]+"."+M[2])}r{7(O[1]!=M[1]){f("2v: 4G 2w 2V 1G v"+O[0]+"."+O[1]+"."+O[2]+" U v"+M[0]+"."+M[1]+"."+M[2])}r{7(O[2]!=M[2]){f("2v: 4H 4I 1G v"+O[0]+"."+O[1]+"."+O[2]+" U v"+M[0]+"."+M[1]+"."+M[2])}}}}r{Z.1t("W")}1b=1V}d=1b.d;1z()}1C(X){f(X)}}7(!Z.1T){f("4M d 4N 4S 2T 4U.",1);2g()}r{2g();f("2R: "+d,1)}l 20(17){f("54 2h d == "+d.F,1);d.N(17);f(17+" 5c U d D.",1);1z()}l 2O(a,b){a=a.2H();b=b.2H();7(a>b){q 1}7(a<b){q-1}q 0}l 2F(){8 12=d.F;8 a=d.3q(2O);7(12==1){1q(12+" 3r:\\n\\n"+a.24("\\n")+"\\n")}r 7(12>1){1q(12+" 2R:\\n\\n"+a.24("\\n")+"\\n")}r{8 p=2D("3u d D 1l 2l.\\n\\3v a 3w 3x U 1h a 3d:\\n","");7(p){20(p)}}}l 2C(17){7(17==="1M"){d=[];f("3z d 2A",1);1z()}r{8 2r=d.1p(17);7(2r>-1){1b.d=d.3D(2r,1);1z();f(d,1);f(17+" 2A 1G d D.")}}}l 2t(g){g=g||y.2x;7(g.V.Q==="16"&&g.V.x!=""){8 j=g.V;8 h=j.x;8 12=h.F;8 k;8 B=g.1f;7(12>=10&&h.K(/^(\\/2s)/)!=A){1s=1K}7(1s&&12>=10&&!g.2q&&!g.27&&!g.2p&&B>47&&B<3Q){f("2t 1f =="+g.1f,1);k=h.14(9);7(!k.K(/\\s/)){1g(8 i=0;i<d.F;i++){8 1y=k.F;7(d[i][1y-1]===k[1y-1]&&d[i].14(0,1y)==k){j.x="/2s "+d[i]+" ";j.2y(10+1y-1,10+d[i].F,"3T")}}}r{1s=I}}r{1s=I}}}1e.3U=l(g){3V(2d);2d=23(l(){2t(g)},39)};l 2G(){7(2k("2I "+1Z+" U Y d D?\\n\\2J 2K 2L a D 2h Y d 2M 2N /D")){20(1Z)}}l 1w(h){8 2P=I;8 22;h=h.J(/(\\[P\\])*(2S?:\\/\\/)([\\4d-z\\.-]+)(\\.[a-z]{2,6})([\\/\\w\\.\\-\\=\\?\\&\\%\\+\\|#:;,~\\*\\(\\)\\$]*)*\\/?(\\[\\/P\\])*/R,l(){8 C=[];8 1H=E[2].K(/2S?:\\/\\//);1g(8 i 1c E){f("1w P 2W 2X "+i+"= "+E[i],1)}C.N("[P]");C.N(E[2]);C.N(E[3]);C.N(E[4]);C.N(E[5]);C.N("[/P]");7(1H===A){f("4n P - 2Z 1H",2)}r{2P=1K;f("4p 11 31\\n 4s 1H = "+1H,2)}q C.24("")});f("4t 1g 11",1);22=h.J(/(\\[11\\])?([#])?([0-9]{3,4})[:.]([0-9]{3,4})([:.]\\w+)?(\\[\\/11\\])?/R,l(){1g(8 i 1c E){f("1w 11 2W 2X "+i+" = "+E[i],1)}8 1W=E[2];f("1W "+1W,1);7(!1W){f("2Z 4v 4w");8 C=[];C.N("[11]");C.N(E[3]);C.N(":");C.N(E[4]);7(E[5]!=33){C.N(E[5].J(".",":"))}C.N("[/11]");q C.24("")}r{q E[0]}});h=22;f("4y",1);f("4z 37: "+22,1);h=h.J(/\\[p\\]([a-34-35\\-\\s]+)\\[\\/p\\]/R,"[1S]$1[/1S]");h=h.J(/\\[a\\]([a-34-35\\-\\s]+)\\[\\/a\\]/R,"[1R]$1[/1R]");q h}1e.4E=l(g){g=g||y.2x;7(!g.38&&g.1f===13&&(g.V.Q==="16"||g.V.Q==="1d")){8 S=g.V;8 G=S.x;8 1h=G.K(/^(\\/1h)/);8 1B=G.K(/^(\\/1B)/);8 3b=G.K(/^((\\/d)|(\\/D))/);8 k;7(G.K(/^(\\/2s)/)!=A||1h!=A){7(1h!=A){k=G.14(5)}r{k=G.14(9)}7(k.K(/^(\\w*)\\s/)){8 1I=k.K(/^(\\w*)/);k=1I[0].J(/\\s$/,"");7(d.1p(k)==-1){1Z=k;23(2G,4J)}}r 7(d.1p(k)==-1){f("1Q 1P 1O",1);S.2m();S.x="";8 3f=2k("2I "+k+" U Y d D?\\n\\2J 2K 2L a D 2h Y d 2M 2N /D");7(3f){20(k);q I}r{q I}}r 7(k&&d.1p(k)>-1){1q(k+" 1l 4O 1c Y d D.")}}7(1B){k=G.14(5);f("1Q 1P 1O",1);S.x="";7((d.1p(k)>-1||k=="1M")&&2k("4P 4Q "+k+" 1G Y d?")){2C(k)}r{1q(k+" 1l 2T 1c Y d D.")}q I}7(3b){f("1Q 1P 1O",1);S.x="";2F();q I}7(G.F===6&&G.K(/^(\\/32)/)!=A){f("1Q 1P 1O",1);S.x="";30();q I}7(S!=A&&S.Q==="16"&&G!==""){f("4R 3g-31",1);G=1w(G);7(G!==S.x){S.x=G}}}7(g.2p&&!g.38&&!g.2q&&!g.27&&g.V!=A&&(g.V.Q==="1d"||g.V.Q==="16")){8 o=g.V;8 m=o.x;7(g.2p&&!g.2q&&!g.27){8 L=g.3k;8 B=g.1f;f("3k == "+L,1);f("1f == "+B,1);7(o.Q==="1d"&&(L===49||B===49)){f("4Y 2e+1 2i 3g-19",1);7(o!=A){8 1i=o.1j;m=1w(m);7(m!==""||m!==o.x){o.x=m;o.1j=1i;1D(o,0)}}}7(L===50||B===50){7(o!=A){8 P=2D("4Z (53: 3l.3m 1a 56.3l.3m)","");7(P!=A){o.x+="[P]"+P+"[/P]"}}}7((L===57||B===58)||L===51||B===51){15("[1S]",o);7(y.18){q I}}7((L===5a||B===5b)||L===52||B===52){15("[1R]",o);7(y.18){q I}}7(L===48||B===48){7(o.Q==="1d"){8 1i=o.1j}7(o!=A){m=m.J(/\\[\\/?11\\]/R,"");m=m.J(/\\[\\/?P\\]/R,"");m=m.J(/\\[\\/?1S\\]/R,"");m=m.J(/\\[\\/?1R\\]/R,"");m=m.J(/\\[\\/?b\\]/R,"");m=m.J(/\\[\\/?i\\]/R,"");m=m.J(/\\[\\/?u\\]/R,"");m=m.J(/\\[\\/?s\\]/R,"");o.x=m}7(o.Q==="1d"){o.1j=1i}}7(L===5e||B===5f){15("[b]",o);7(y.18){q I}}7(L===5g||B===5h){15("[i]",o);7(y.18){q I}}7(L===5i||B===5j){15("[u]",o);7(y.18){q I}}7(L===5k||B===5l){15("[s]",o);7(y.18){q I}}}}}}}1C(X){f("28: "+X,1);1v.3n(X)}l 1X(){1u{7(5o 5p!=="33"){28()}r{y.23(1X,3p)}}1C(X){1v.1N("1X: ",X)}}y.23(1X,3p)};1u{8 W=1e.5r("5s");W.5t="("+3j.5u()+")();";W.Q="16/5v";1e.5w("5x")[0].5y(W)}1C(X){1v.1N("W: 5z 3n: ",X)}})()}1C(e){1v.1N("5A 5B 5C-5D 42: ",e)}',62,351,'|||||||if|var|||||contacts||chlog|kEv|inText||inputField|sub|function|inText2||inputField2||return|else||||||value|window||null|kc|result|list|arguments|length|inText1|pos|false|replace|match|cc|vb|push|va|url|type|gi|inputField1|tags|to|target|chatHelper|err|your|localStorage||coords|len||substr|tagWith|text|fr|chatHelper_suppressBrowserAltKeys|tag|or|saveObj|in|textarea|document|keyCode|for|add|st|scrollTop|tAlt|is|slice|selectionStart|charAt|indexOf|alert|eTag|isWhisp|getItem|try|console|autoTag|obj|slen|saveData|and|del|catch|moveCaret|sPos|ePos|from|protocol|arr|validCharPatt|true|clone|all|log|field|input|clearing|alliance|player|myContacts|dat|saveObjTmp|hashBefore|chatHelper_checkIfLoaded|chatHelper_version|_sub|saveContact|tagLen|lookBack|setTimeout|join|sel|inputObject|ctrlKey|createchatHelper|nAlt|saveObjVer|selectionEnd|eTagLen|timer|Alt|chat|loadData|of|message|getCaretPos|confirm|empty|focus|the|split|altKey|altGraphKey|ind|whisper|keyUpTimer|jString|ChatHelper|version|event|setSelectionRange|getCursorWordPos|deleted|cursor|deleteContact|prompt|lc|listContacts|delayedConfirm|toLowerCase|Add|nYou|can|see|by|typing|caseInsensitiveSort|isUrl|while|Contacts|https|not|chatHelper_name|change|reg|arg|selection|no|showHelp|tagging|chelp|undefined|z0|9_|tsearches|string|shiftKey|onkeyupDelay|JSON|showContacts|Urls|contact|Coords|cf|auto|wraps|str|chatHelper_main|charCode|google|com|error|word|1333|sort|Contact|you|hit|Your|nType|name|here|space|All|are|inserted|nAttempts|splice|preserve|scroll|position|this|duplicate|nEnter|key|tplayer|talliance|tbold|collapse|titalic|91|moveToElementText|tunderline|forward|onkeyup|clearTimeout|__|tstrikethrough|nContact|setEndPoint|commands|EndToEnd|Pack|wipes|whole|ChatHelper_debug|lvl||||Tiberium|Alliances|them|da|saveJSON|before|setItem|submission|Chat|Helper|forum|post|DTeCH|autotag|removeItem|bypassing|accordingly|parse|detected|checking|Cursor|hash|returning|Type|lookedback|LB|moved|Major|chatHelper_debug|beginning|onkeydown|createRange|Minor|Version|Patched|500|tManual|URL|Deprecated|variable|already|Really|delete|onEnter|does|insertion|exist|popup|tclears|any|attempting|Website||||Syntax|Number|nWord|www|112|80|selected|97|65|added|box|98|66|105|73|117|85|115|83|where|loading|typeof|qx|show|createElement|script|innerHTML|toString|javascript|getElementsByTagName|head|appendChild|init|TA|Script|Bug|Fixes|stringify'.split('|'),0,{}))