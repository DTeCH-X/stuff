// ==UserScript==
// @name           Tiberium Alliances ReplayShare - DTeCH
// @version        2.1.1I
// @namespace      DTTARS
// @license        GPL version 3 or any later version; http://www.gnu.org/copyleft/gpl.html
// @author         DTeCH, petui
// @description    Share combat reports with your friends in other alliances and worlds
// @include        http*://prodgame*.alliances.commandandconquer.com/*/index.aspx*
// @icon           http://eistee82.github.io/ta_simv2/icon.png
// @updateURL      https://cdn.rawgit.com/DTeCH-X/stuff/master/DTTARS.meta.js
// @downloadURL    https://cdn.rawgit.com/DTeCH-X/stuff/master/DTTARS.user.js
// ==/UserScript==

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('3b{(7(){c 4O=7(){\'6J 6I\';7 4C(){26.2a(\'k 2A\');1A.34(\'6y\',\'6v\');c 1D=1A.4z.1u(\'1D\',{T:7(){y 3.4w(\'G\')},4v:7(G){3.i(\'G\',G);y 3},4u:7(G){y V.1E(3.T())===V.1E(G)}});5.1I.1K(\'k\',{I:\'68\',1u:5.P.4z,63:{2V:\'5.1q.I.1g\'},2d:{1x:d,E:d,34:7(){3.4q();3.4m()},4q:7(){c 4i=j.1J.1h.1h.1L.4h.1M();c 2p=4i.4g(/3\\.([A-Z]{6})\\(d,[a-z]\\);}$/)[1];c m=3;c 4e=j.1J.1h.1h.1L[2p];j.1J.1h.1h.1L[2p]=7(4d,G){4e.W(3,4d,G);m.1x=G;m.5k(\'2V\',G)};c 48=R.13.2i.47;R.13.2i.47=7(v){u(!m.46(v)){48.55(3,54)}}},4m:7(){c 2B=8 5.b.43.4Z();c 1H=8 5.b.43.1j(\'30\');1H.D(\'M\',3.1n,3);2B.g(1H);5.P.Y.U().4Y().4X().4V(\'k\',\'3Z/3Y/3X.3U\',2B);c 2r=8 5.b.1o.1j(\'3T\').i({6U:\'1H-2y-6T\',25:\'30 3Q k\',L:6L});2r.D(\'M\',3.3N,3);5.P.Y.U().6B().g(2r,{2J:6t,2b:12})},2N:7(1w){c 1a=V.2e(2W.3L(\'k\'))||{};y 1w 3Q 1a?1a[1w]:d},2Z:7(1w,3J){c 1a=V.2e(2W.3L(\'k\'))||{};1a[1w]=3J;2W.5G(\'k\',V.1E(1a))},46:7(v){c 33=v.4g(/^1y?:\\/\\/36\\.37\\.1z\\/([A-5F-5r-9]+)/);u(33!==d){c 11=33[1];u(3.2N(\'3C\')){3.1n();3.E.2j(11)}1t{c m=3;c 3A=8 k.3x(v,7(3w){m.1n();m.E.2j(11);u(3w){m.2Z(\'3C\',o)}});3A.1c()}y o}y l},1n:7(){u(3.E===d){3.E=8 k.C(3)}3.E.1c()},3N:7(){3.1n();3.E.2s()},2t:7(f){5.P.Y.U().4R().4P(j.1g.6P.6C,-1,0,0);3b{j.1J.6u.6s().6l().4h(f)}2C(e){26.2a(\'k::2t\',e.1M());y l}y o},2E:7(){y 3.1x!==d},3s:7(){y 3.1x}}});5.1I.1K(\'k.C\',{1u:5.b.E.C,2G:7(F){5.b.E.C.W(3);3.F=F;3.i({2I:\'k\',3q:\'3Z/3Y/3X.3U\',5E:0,5p:2,5i:6,5c:6,2P:l,2Q:l,2R:l,2S:l,2T:o});3.57(\'3q\').i({3o:o,L:20,1b:12,4Q:\'5l\'});3.3m();3.D(\'53\',3.3l,3);3.29(8 5.b.O.35());3.g(3.B=8 5.b.p.r().i({1v:\'3k\',1i:\'#3j\',45:\'3e\'}));c 3c=7(40,3f,3g,3h,3i){c 2h=8 5.b.2f.28(8 5.b.O.31(4));2h.g(3f.i({L:18,1b:18,3o:o}));2h.g(3g);c J=8 5.b.5I.5S(40);J.29(8 5.b.O.62(2,2).3n(0,1).3n(1,9));J.g(8 5.b.p.r(\'6K:\').i({1v:\'2Y\'}),{1d:0,1f:0});J.g(2h,{1d:0,1f:1});J.g(8 5.b.p.r(\'q:\').i({1v:\'2Y\'}),{1d:1,1f:0});J.g(3h,{1d:1,1f:1});J.g(8 5.b.p.r(\'58:\').i({1v:\'2Y\'}),{1d:2,1f:0});J.g(3i,{1d:2,1f:1});y J};c 22=8 5.b.2f.28(8 5.b.O.5f()).i({1v:\'3k\',1i:\'#5g\'});3.g(22);22.g(3c(\'5h\',3.21=8 5.b.p.3p(),3.2c=8 5.b.p.r(),3.1X=8 5.b.p.r(),3.1W=8 5.b.p.r()).i({L:3r}));22.g(3c(\'5T\',3.1U=8 5.b.p.3p(),3.1S=8 5.b.p.r(),3.1R=8 5.b.p.r(),3.1Q=8 5.b.p.r()).i({L:3r}));3.g(3.1O=8 5.b.p.r().i({3t:\'2J\',1i:\'#3u\'}));c 1l=8 5.b.2f.28(8 5.b.O.31(4)).i({6R:4,6S:2,6V:4});3.g(1l);3.1m=8 5.b.1o.1j(\'3v\').i({2v:3.F.2E(),25:\'3v 4S 4T 4U h 4W 51\'});3.1m.D(\'M\',3.2s,3);1l.g(3.1m,{2m:1});u(!3.F.2E()){3.F.3y(\'2V\',3.3z,3)}3.1s=8 5.b.1o.1j(\'5d\').i({2v:l,25:\'5e 2A h\'});3.1s.D(\'M\',3.3B,3);1l.g(3.1s,{2m:1});3.1p=8 5.b.1o.1j(\'3D 14\').i({2v:l,25:\'3D 3E 14 5m 2A h\'});3.1p.D(\'M\',3.3F,3);1l.g(3.1p,{2m:1})},5q:{3a:5C,3G:d},2d:{F:d,H:d,B:d,21:d,2c:d,1X:d,1W:d,1U:d,1S:d,1R:d,1Q:d,1O:d,1m:d,1s:d,1p:d,h:d,3m:7(){c s=3.F.2N(\'s\');u(s===d){c 3H=5.P.Y.U().5L().5M().3I().2g;s={2g:3H-k.C.3a-16,2b:60,L:k.C.3a,1b:k.C.3G}}3.3K(s.2g,s.2b);3.67(s.L);3.6k(s.1b)},3l:7(1q){3.F.2Z(\'s\',1q.T())},3z:7(){3.1m.2X(o)},2s:7(){c f=3.F.3s();f=V.2e(V.1E(f));6m f.6n;u(3.h===d||!3.h.4u(f)){3.2M(8 1D().4v(f))}},3B:7(){c f=3.h.T();u(!3.F.2t(f)){3.B.n(\'3M: 6x h G\');3.B.2H()}1t{3.B.2F()}},3F:7(){3.3O();u(3.h.6G()){c m=3;3.h.6H(d,{3P:7(h){m.H.2D(\'1y://36.37.1z/\'+h.11)},S:7(h,S){m.H.3R(S.3S)}})}1t{3.H.2D(\'1y://36.37.1z/\'+3.h.11)}},2z:7(f){c 2x=f.24!==j.q.w.3V&&f.24!==j.q.w.3W;3.21.1Y(2o.2n.13.2l.3d.41(f.24));3.2c.n(2x?3.1e(\'Q:X\'):f.50);3.1X.n(3.42(f));3.1W.n(2x?3.1e(\'Q:X\'):(f.52||\'-\'));c 1F=f.1C!==j.q.w.3V&&f.1C!==j.q.w.3W;3.1U.1Y(2o.2n.13.2l.3d.41(1F?j.q.w.2w:f.1C));3.1S.n(1F?3.1e(\'Q:X\'):f.56);3.1R.n(3.44(f));3.1Q.n(1F?3.1e(\'Q:X\'):(f.71||\'-\'));3.1O.n(2o.2n.2i.59(8 5a(f.5b)))},42:7(f){c 1B;2k(f.24){x j.q.w.2w:x j.q.w.49:x j.q.w.4a:x j.q.w.4b:1B=3.1e(f.4c)+\' (\'+f.5j+\')\';1k;32:1B=f.4c}y 1B},44:7(f){c 23;2k(f.1C){x j.q.w.2w:x j.q.w.49:x j.q.w.4a:x j.q.w.4b:x j.q.w.5n:c 2L=f.5o;c I;2k(2K.4f(2L)){x j.1g.1T.1P.1N.5s:x j.1g.1T.1P.1N.5t:I=\'Q:X 5u\';1k;x j.1g.1T.1P.1N.5v:I=\'Q:X 5w\';1k;x j.1g.1T.1P.1N.5x:I=\'Q:5y 5z\';1k;32:I=\'Q:X 5A\'}23=3.1e(I)+\' (\'+2K.5B(2K.4f(2L)/10)+\')\';1k;32:23=f.5D}y 23},2j:7(11){3.B.2F();3.2U(\'4j...\');c m=3;c 4k=8 1A.5H(1D);4k.4w(11,{3P:7(h){m.2M(h)},S:7(h,S){m.B.n(\'3M: \'+S.3S);m.B.2H();u(m.h!==d){m.2z(m.h.T())}1t{m.2U(d)}}})},2M:7(h){3.h=h;3.2z(h.T());3.1s.2X(o);3.1p.2X(o)},3O:7(){u(3.H===d){c s=3.3I();3.H=8 k.C.4l();3.H.3K(s.2g-(3.H.5J()-s.L)/2,s.2b-(3.H.5K()-s.1b)/2)}3.H.1c()},2U:7(N){3.21.1Y(d);3.2c.n(N);3.1X.n(N);3.1W.n(N);3.1U.1Y(d);3.1S.n(N);3.1R.n(N);3.1Q.n(N);3.1O.n(N)}}});5.1I.1K(\'k.C.4l\',{1u:5.b.E.C,2G:7(){5.b.E.C.W(3);3.i({2I:\'3T 14\',2R:l,2S:l,2Q:l,2P:l,4n:o,2T:l,5N:1,1i:\'#3u\',L:5O,1b:5P});3.29(8 5.b.O.35());3.g(8 5.b.p.r(\'5Q 5R 14 4o 3E 3 h 4p 5U\'));3.g(3.K=8 5.b.1o.5V().i({5W:o,5X:o,5Y:\'4j...\'}));3.g(3.B=8 5.b.p.r().i({1i:\'#3j\',45:\'3e\'}));3.K.D(\'5Z\',3.K.4r,3.K);3.D(\'61\',3.4s,3)},2d:{K:d,B:d,4s:7(1q){u(!1q.T()){3.1r()}},1c:7(){3.K.n(d);3.B.2F();5.b.E.C.1L.1c.W(3)},2D:7(v){3.K.n(\'[v]\'+v+\'[/v]\');8 5.2l.64(7(){3.K.65();3.K.4r()},3).66()},3R:7(S){3.B.n(S);3.B.2H()}}});5.1I.1K(\'k.3x\',{1u:R.13.4t,2G:7(v,17){R.13.4t.W(3);3.17=17;3.v=v;3.i({2I:\'30 14\',2R:l,2S:l,2P:l,2Q:l,4n:l,2T:l,69:o});3.29(8 5.b.O.35(10));3.3y(\'6a\',3.6b,3);3.g(8 5.b.p.r(\'6c 6d 6e 4o 1c 3 14 4p k?\').i({6f:o,6g:6h,6i:o,1i:\'6j\'}));c 15=8 5.b.2f.28(8 5.b.O.31(10).i({3t:\'2J\'}));c 2q=8 R.b.27(\'4x 6o 6p\\\'t 6q 6r\');2q.D(\'M\',3.4y,3);c 2u=8 R.b.27(\'4x\');2u.D(\'M\',3.4A,3);c 39=8 R.b.27(\'6w\');39.D(\'M\',3.4B,3);c 38=8 R.b.27(\'6z\');38.D(\'M\',3.1r,3);15.g(2q);15.g(2u);15.g(39);15.g(38);3.g(15)},2d:{17:d,v:d,4B:7(){3.1r();5.P.Y.U().6A(3.v)},4y:7(){3.1r();3.17.W(d,o)},4A:7(){3.1r();3.17.W(d,l)}}})}7 2O(){3b{u(4D 1A!==\'4E\'&&4D 5!==\'4E\'&&5.P.Y.U()&&5.P.Y.U().6E){4C();k.6F().34()}1t{4F(2O,4G)}}2C(e){26.2a(\'k: \',e.1M())}}4F(2O,4G)};c 1Z=1V.4H(\'4I\');1Z.6M=\'1y://6N.6O.1z/4J/2e-1.2.19.6Q.4J\';1Z.I=\'2y/4K\';1V.4L(\'4M\')[0].4N(1Z);c 1G=1V.4H(\'4I\');1G.6W=\'(\'+4O.1M()+\')();\';1G.I=\'2y/4K\';1V.4L(\'4M\')[0].4N(1G)})()}2C(e){26.2a("6X 6Y 6Z-70 6D: ",e)}',62,436,'|||this||qx||function|new|||ui|var|null||replayData|add|replay|set|ClientLib|ReplayShare|false|context|setValue|true|basic|Base|Label|bounds||if|url|EFactionType|case|return|||errorMessageLabel|Window|addListener|window|replayShare|data|sharePopup|type|groupBox|linkField|width|execute|label|layout|core|tnf|webfrontend|error|getData|getApplication|JSON|call|mutants|Init|||id||gui|link|buttonContainer||callback|||config|height|open|row|tr|column|Data|Battleground|textColor|Button|break|controlsContainer|fetchReplayDataButton|openWindow|form|uploadButton|event|close|watchReplayButton|else|extend|font|key|lastReplayData|https|com|Parse|attackerBaseName|df|Replay|stringify|isForgottenDefender|scriptRS|button|Class|Vis|define|prototype|toString|ECampType|timeOfAttackLabel|WorldObjectNPCCamp|defenderAllianceLabel|defenderBaseLabel|defenderNameLabel|WorldSector|defenderFactionImage|document|attackerAllianceLabel|attackerBaseLabel|setSource|parseScript||attackerFactionImage|detailsContainer|defenderBaseName|af|toolTipText|console|SoundButton|Composite|setLayout|log|top|attackerNameLabel|members|parse|container|left|nameContainer|Util|download|switch|util|flex|cnc|phe|initCombatMethodName|yesDontAskButton|shareButton|onClickFetchReplayData|tryPlay|yesButton|enabled|FORFaction|isForgottenAttacker|text|setDetailsFromReplayData|loaded|subMenu|catch|setLinkURL|hasLastReplayData|exclude|construct|show|caption|right|Math|defenderPlayerId|setReplay|getConfig|waitForGame|showMaximize|showMinimize|allowMaximize|allowMinimize|resizable|resetFields|lastReplayDataChange|localStorage|setEnabled|font_size_13_bold|setConfig|Open|HBox|default|matches|initialize|VBox|replayshare|parseapp|cancelButton|noButton|DefaultWidth|try|createPlayerGroupBox|Images|excluded|factionImage|nameLabel|baseLabel|allianceLabel|e44|font_size_13|onWindowMove|initializePosition|setColumnFlex|scale|Image|icon|290|getLastReplayData|alignX|aaa|Fetch|dontAskAgain|ConfirmationWidget|addListenerOnce|onLastReplayDataChanged|widget|onClickWatchReplay|dontAsk|Get|share|onClickUpload|DefaultHeight|baseNavBarX|getBounds|value|moveTo|getItem|Error|onClickShare|openSharePopup|success|in|setError|message|Share|png|GDIFaction|NODFaction|icn_replay_speedup|icons|FactionUI|legend|getFactionIcon|getReplayAttackerBaseName|menu|getReplayDefenderBaseName|visibility|handleLink|openLink|originalOpenLink|NPCBase|NPCCamp|NPCOutpost|an|extra|originalInitCombat|abs|match|LoadCombatDirect|source|Loading|query|ShareLink|initializeEntryPoints|showClose|to|with|initializeHacks|selectAllText|onChangeActive|CustomWindow|equals|setData|get|Yes|openReplayShareAndDontAsk|Object|openReplayShare|openExternal|createReplayShare|typeof|undefined|setTimeout|1000|createElement|script|js|javascript|getElementsByTagName|head|appendChild|mainRS|setView|alignY|getPlayArea|most|recently|viewed|Add|or|getScriptsButton|getMenuBar|Menu|apn|simulation|aan|move|arguments|apply|dpn|getChildControl|Alliance|getDateTimeString|Date|toa|contentPaddingLeft|Play|Watch|Flow|111|Attacker|contentPaddingRight|abl|fireDataEvent|middle|for|NPCFortress|dpi|contentPaddingBottom|statics|z0|Beginner|Random|camp|Cluster|outpost|Fortress|centerhub|short|base|floor|300|dn|contentPaddingTop|Za|setItem|Query|groupbox|getWidth|getHeight|getBaseNavigationBar|getLayoutParent|padding|378|98|Copy|the|GroupBox|Defender|others|TextField|readOnly|focusable|placeholder|click|75|changeActive|Grid|events|DeferredCall|focus|schedule|setWidth|singleton|modal|resize|center|Would|you|like|rich|maxWidth|360|wrap|white|setHeight|get_Battleground|delete|debug|and|don|ask|again|GetInstance|150|VisMain|ajepOC4n9K44jh89s5WKtEa4v0hh3OMokxNqLqt0|No|Invalid|PmNW9dH7wrTFQmYgInbDVgGqagUOVPIzENRwzfWu|Cancel|showExternal|getReportReplayOverlay|pavmCombatReplay|Pack|initDone|getInstance|isNew|save|strict|use|Name|80|src|www|parsecdn|PlayerAreaViewMode|min|marginBottom|marginLeft|small|appearance|marginTop|innerHTML|TA|Script|Bug|Fixes|dan'.split('|'),0,{}))